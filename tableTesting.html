<!DOCTYPE html>

<html>

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Page Title</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- reset browser styles -->
  <link rel="assets/stylesheet" type="text/css" media="screen" href="styles/reset.css" />
  <link href="https://fonts.googleapis.com/css?family=Galada|Oleo+Script+Swash+Caps|Tulpen+One" rel="stylesheet">
  <!-- bootstrap links -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
    crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" media="screen" href="styles/main.css" />
  <!-- liking into some common/popular google fonts, because -->
  <link href="https://fonts.googleapis.com/css?family=Abril+Fatface|Comfortaa|Dancing+Script|Great+Vibes|Kaushan+Script|Lato|Lobster|Lobster+Two|Marck+Script|Monoton|Open+Sans|Playfair+Display|Roboto|Roboto+Mono|Roboto+Slab|Rozha+One|Sacramento|Shrikhand|Slabo+27px|Source+Code+Pro"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
  <!-- adding jQuery -->

  <style>
    body {
      color: black;
    }
  
    td {
      border: 1px black solid;
    }

    #current-box {
      background-color: yellow;
    }
  </style>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="scripts/main03.js"></script>

  <script>
    var currentCell = null;


    // handle clicks on spreadsheet...
    $(document).ready(function(){
    // $("#the-table").children().on('click', function(evt) {
      $("#table-wrapper").on('click', function(evt) {

      console.log("*********click trapped*****************")
      
      var cellClicked = evt.target.id;
      console.log("most recently clicked is "+cellClicked)
      
      // if there's another activeCell currentCell, we need to kill it.
      if (currentCell != cellClicked) {
        // run clean up routine on old current box
        if (cellClicked == 'current-box') {
          //do nothing
        } else if (currentCell == null) {
          console.log("current box not yet defined")
        } else {
          releasecurrentCell(currentCell, cellClicked);
        }
      } 
      if (cellClicked != 'current-box') {
        console.log("!!!!!!!!!!!!!!!");
        currentCell = cellClicked;
        if ($("#"+currentCell).html().length > 0) {
          var existingHTML = $("#"+currentCell).html();
          $("#"+cellClicked).html("<input id='current-box' type='text' value='"+existingHTML+"'autofocus>")
          // console.log("ouch you're erasng me")
        } else {
          $("#"+cellClicked).html("<input id='current-box' type='text' autofocus>")
        }
        // function() {
          $('#current-box').focus(); 
        // });
      }
    });
    });
    function releasecurrentCell(oldCellID, newCellID) {
      
      console.log("releasing prior box")
      var HtmlToBe = $("#current-box").val();
      console.log('$("#current-box").val() is '+HtmlToBe)
      $("#current-box").remove();
      $("#"+oldCellID).html(HtmlToBe);
    }

  </script>
</head>

<body>

  <div id="table-wrapper">
      <table id="the-table">
          <tr>
            <td id="r0c0" class="r0 c0"></td>
            <td id="r0c1" class="r0 c1"></td>
            <td id="r0c2" class="r0 c2"></td>
            <td id="r0c3" class="r0 c3"></td>
          </tr>
          <tr>
            <td id="r1c0" class="r1 c0"></td>
            <td id="r1c1" class="r1 c1"></td>
            <td id="r1c2" class="r1 c2"></td>
            <td id="r1c3" class="r1 c3"></td>
          </tr>
          <tr>
            <td id="r2c0" class="r2 c0"></td>
            <td id="r2c1" class="r2 c1"></td>
            <td id="r2c2" class="r2 c2"></td>
            <td id="r2c3" class="r2 c3"></td>
          </tr>
          <tr>
            <td id="r3c0" class="r3 c0"></td>
            <td id="r3c1" class="r3 c1"></td>
            <td id="r3c2" class="r3 c2"></td>
            <td id="r3c3" class="r3 c3"></td>
          </tr>
          <tr>
            <td id="r4c0" class="r4 c0"></td>
            <td id="r4c1" class="r4 c1"></td>
            <td id="r4c2" class="r4 c2"></td>
            <td id="r4c3" class="r4 c3"></td>
          </tr>
          <tr>
            <td id="r5c0" class="r5 c0"></td>
            <td id="r5c1" class="r5 c1"></td>
            <td id="r5c2" class="r5 c2"></td>
            <td id="r5c3" class="r5 c3"></td>
          </tr>
          <tr>
            <td id="r6c0" class="r6 c0"></td>
            <td id="r6c1" class="r6 c1"></td>
            <td id="r6c2" class="r6 c2"></td>
            <td id="r6c3" class="r6 c3"></td>
          </tr>
        </table>
    <script>
    </script>
  </div>

</body>

</html>